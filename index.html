<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>¬øCansado de que te digan "Todo est√° normal"? | Bioesc√°ner La Red de Luz</title>
    <meta name="description" content="Para personas que YA gastaron en estudios m√©dicos sin respuestas. Bioesc√°ner de 45 par√°metros en 5 minutos.">
    <link rel="icon" type="image/x-icon" href="assets/images/favicon.ico">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        gold: { light: '#e4cd85', DEFAULT: '#d4af37', dark: '#c08a2d' },
                        blue: { primary: '#163384', secondary: '#2c5aa0' },
                        red: { frustration: '#d32f2f' },
                        green: { relief: '#2e7d32' }
                    }
                }
            }
        }
    </script>
    <style>
        .glass { background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.2); }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-primary via-blue-secondary to-blue-primary min-h-screen text-white font-sans">

    <!-- HERO SECTION -->
    <section class="min-h-screen flex items-center justify-center relative overflow-hidden">
        <div class="container mx-auto px-6 relative z-10">
            <div class="max-w-5xl mx-auto text-center">
                
                <!-- PRE-HEADLINE con ciudad detectada -->
                <div class="inline-flex items-center px-4 py-2 bg-red-frustration/20 border border-red-frustration/50 text-red-200 text-sm font-medium rounded-full mb-4">
                    ‚ö†Ô∏è Solo para personas de <span id="cityDisplay" class="font-bold text-gold-light ml-1">tu ciudad </span> que YA gastaron en estudios m√©dicos
                </div>
                
                <!-- HEADLINE PRINCIPAL -->
                <h1 class="text-4xl md:text-6xl font-bold mb-8 text-white leading-tight">
                    <span class="text-red-400">¬øGastaste $3,000+ en estudios</span><br>
                    <span class="text-gold-light">y sigues sin respuestas?</span>
                </h1>
                
                <!-- SUBHEADLINE -->
                <p class="text-xl md:text-2xl mb-12 text-white/90 leading-relaxed max-w-4xl mx-auto">
                    Si ya viviste el <span class="text-red-300 font-semibold">c√≠rculo vicioso</span> de laboratorios, doctores con prisa y "todo est√° normal"...
                    <br><span class="text-gold-light font-bold">esto es exactamente para ti</span>
                </p>
                
                <!-- SOCIAL PROOF con ciudad -->
                <div class="glass rounded-2xl p-6 mb-12 max-w-2xl mx-auto">
                    <div class="flex items-center justify-center space-x-4 text-gold-light font-semibold">
                        <span>‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</span>
                        <span>+<span id="clientCount">125</span> personas de <span id="cityDisplay2" class="font-bold">tu ciudad</span> ya encontraron respuestas</span>
                    </div>
                </div>
                
                <!-- CTA PRINCIPAL -->
                <a href="#quiz" class="inline-flex items-center px-10 py-5 bg-gradient-to-r from-gold-light to-gold-dark text-blue-primary font-bold text-xl rounded-full hover:scale-105 hover:shadow-2xl transition-all duration-300">
                    Ver si calificas en <span id="cityDisplay3" class="ml-1 font-black">tu ciudad</span>
                    <svg class="w-6 h-6 ml-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"></path>
                    </svg>
                </a>
                
                <!-- Disponibilidad por ciudad -->
                <div class="mt-6">
                    <p class="text-white/70 text-sm">
                        üìç <span id="availabilityText">Verificando disponibilidad en tu zona...</span> ‚Ä¢ <span id="slotsText">Cupos limitados</span>
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- QUIZ SECTION -->
    <section id="quiz" class="py-20 bg-gradient-to-r from-gray-900 via-gray-800 to-gray-900">
        <div class="container mx-auto px-6">
            <div class="max-w-4xl mx-auto text-center mb-16">
                <h2 class="text-4xl md:text-5xl font-bold mb-6 text-white">
                    ¬øEres el candidato ideal en <span id="cityDisplay4" class="text-gold-light">tu ciudad</span>?
                </h2>
                <p class="text-xl text-white/80">Solo trabajamos con personas realmente comprometidas.</p>
            </div>
            
            <div class="max-w-3xl mx-auto">
                <div id="quiz-container" class="space-y-6">
                    
                    <!-- Pregunta 1 -->
                    <div class="quiz-question glass rounded-2xl p-8" data-question="1">
                        <h3 class="text-2xl font-bold mb-6 text-gold-light">1. ¬øCu√°nto has gastado en estudios m√©dicos?</h3>
                        <div class="space-y-4">
                            <label class="quiz-option flex items-center p-4 rounded-xl cursor-pointer hover:bg-white/10">
                                <input type="radio" name="q1" value="menos-1000" class="mr-4">
                                <span>Menos de $1,000</span>
                            </label>
                            <label class="quiz-option flex items-center p-4 rounded-xl cursor-pointer hover:bg-white/10">
                                <input type="radio" name="q1" value="1000-3000" class="mr-4">
                                <span>$1,000 - $3,000</span>
                            </label>
                            <label class="quiz-option flex items-center p-4 rounded-xl cursor-pointer hover:bg-white/10">
                                <input type="radio" name="q1" value="mas-3000" class="mr-4">
                                <span>M√°s de $3,000 ‚úÖ</span>
                            </label>
                        </div>
                    </div>

                    <!-- Pregunta 2 -->
                    <div class="quiz-question glass rounded-2xl p-8 hidden" data-question="2">
                        <h3 class="text-2xl font-bold mb-6 text-gold-light">2. ¬øDispuesto a cambiar h√°bitos?</h3>
                        <div class="space-y-4">
                            <label class="quiz-option flex items-center p-4 rounded-xl cursor-pointer hover:bg-white/10">
                                <input type="radio" name="q2" value="no-cambios" class="mr-4">
                                <span>No planeo cambiar nada</span>
                            </label>
                            <label class="quiz-option flex items-center p-4 rounded-xl cursor-pointer hover:bg-white/10">
                                <input type="radio" name="q2" value="algunos-cambios" class="mr-4">
                                <span>Algunos cambios menores</span>
                            </label>
                            <label class="quiz-option flex items-center p-4 rounded-xl cursor-pointer hover:bg-white/10">
                                <input type="radio" name="q2" value="todos-cambios" class="mr-4">
                                <span>Lo que sea necesario ‚úÖ</span>
                            </label>
                        </div>
                    </div>

                    <!-- NO CALIFICA -->
                    <div id="no-califica" class="glass bg-red-frustration/20 rounded-2xl p-8 hidden text-center">
                        <h3 class="text-2xl font-bold mb-4 text-red-300">No calificas en este momento</h3>
                        <p class="text-white/80 mb-6">Trabajamos con personas comprometidas con su salud.</p>
                        <button onclick="location.reload()" class="px-6 py-3 bg-gray-600 text-white rounded-lg">
                            Volver a intentar
                        </button>
                    </div>

                    <!-- S√ç CALIFICA -->
                    <div id="si-califica" class="glass bg-green-relief/20 rounded-2xl p-8 hidden text-center">
                        <h3 class="text-2xl font-bold mb-4 text-green-300">¬°Perfecto! Calificas en <span id="cityDisplay5" class="text-gold-light">tu ciudad</span></h3>
                        <p class="text-white/90 mb-6">Tienes cupo disponible para esta semana.</p>
                        <a href="#formulario" class="inline-flex items-center px-8 py-4 bg-gradient-to-r from-gold-light to-gold-dark text-blue-primary font-bold text-lg rounded-full">
                            Solicitar cupo en <span id="cityDisplay6" class="ml-1">tu ciudad</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- FORMULARIO -->
    <section id="formulario" class="py-20 bg-black hidden">
        <div class="container mx-auto px-6">
            <div class="max-w-lg mx-auto glass rounded-3xl p-8">
                <div class="bg-gradient-to-r from-red-frustration to-red-500 text-white text-center py-3 px-6 rounded-xl mb-8 font-semibold">
                    üö® Cupo reservado en <span id="cityDisplay7">tu ciudad</span>
                </div>
                
                <form id="leadForm" class="space-y-6">
                    <div>
                        <label class="block text-gold-light font-semibold mb-2">Nombre completo *</label>
                        <input type="text" id="nombre" class="w-full px-4 py-3 bg-white/90 text-gray-900 rounded-xl" required>
                    </div>
                    <div>
                        <label class="block text-gold-light font-semibold mb-2">WhatsApp *</label>
                        <input type="tel" id="whatsapp" class="w-full px-4 py-3 bg-white/90 text-gray-900 rounded-xl" required>
                    </div>
                    
                    <!-- Ciudad detectada autom√°ticamente -->
                    <div class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded-xl">
                        <div class="flex items-center">
                            <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd"></path>
                            </svg>
                            <span class="font-semibold">Ciudad detectada: <span id="cityConfirm">Cargando...</span></span>
                        </div>
                        <p class="text-sm mt-1">Si esta no es tu ciudad, cont√°ctanos para verificar disponibilidad.</p>
                    </div>
                    
                    <button type="submit" class="w-full bg-gradient-to-r from-gold-light to-gold-dark text-blue-primary font-bold py-4 rounded-xl">
                        Solicitar cupo prioritario
                    </button>
                </form>
            </div>
        </div>
    </section>

    <script>
        // URL Parameters y City Detection
        const urlParams = new URLSearchParams(window.location.search);
        const cityParam = urlParams.get('ciudad') || urlParams.get('city') || urlParams.get('c');
        
        // Configuraci√≥n por ciudad
        const cityConfig = {
            'guaymas': {
                name: 'Guaymas',
                clientCount: 247,
                phone: '6228558278',
                availability: 'Disponible inmediatamente',
                slots: '2 cupos disponibles hoy'
            },
            'guadalajara': {
                name: 'Guadalajara',
                clientCount: 428,
                phone: '6221424577',
                availability: 'Disponible inmediatamente',
                slots: '1 cupo disponible hoy'
            },
            'hermosillo': {
                name: 'Hermosillo',
                clientCount: 156,
                phone: '6221424577',
                availability: 'Consultar disponibilidad',
                slots: 'Lista de espera'
            }
        };
        
        // Ciudad detectada
        let detectedCity = 'guadalajara'; // Default
        if (cityParam) {
            const cityKey = cityParam.toLowerCase();
            if (cityConfig[cityKey]) {
                detectedCity = cityKey;
            }
        }
        
        const currentCity = cityConfig[detectedCity];
        
        // Actualizar todos los elementos de ciudad en la p√°gina
        function updateCityElements() {
            const cityElements = [
                'cityDisplay', 'cityDisplay2', 'cityDisplay3', 'cityDisplay4', 
                'cityDisplay5', 'cityDisplay6', 'cityDisplay7', 'cityConfirm'
            ];
            
            cityElements.forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    element.textContent = currentCity.name;
                }
            });
            
            // Actualizar contadores espec√≠ficos
            const clientCountEl = document.getElementById('clientCount');
            if (clientCountEl) clientCountEl.textContent = currentCity.clientCount;
            
            const availabilityEl = document.getElementById('availabilityText');
            if (availabilityEl) availabilityEl.textContent = currentCity.availability;
            
            const slotsEl = document.getElementById('slotsText');
            if (slotsEl) slotsEl.textContent = currentCity.slots;
        }
        
        // Quiz Logic
        let currentQuestion = 1;
        let quizAnswers = {};

        document.querySelectorAll('input[type="radio"]').forEach(radio => {
            radio.addEventListener('change', function() {
                quizAnswers[this.name] = this.value;
                
                if (currentQuestion < 2) {
                    document.querySelector(`[data-question="${currentQuestion}"]`).classList.add('hidden');
                    currentQuestion++;
                    document.querySelector(`[data-question="${currentQuestion}"]`).classList.remove('hidden');
                } else {
                    evaluateQuiz();
                }
            });
        });

        function evaluateQuiz() {
            document.querySelectorAll('.quiz-question').forEach(q => q.classList.add('hidden'));
            
            if (quizAnswers.q1 === 'mas-3000' && quizAnswers.q2 === 'todos-cambios') {
                document.getElementById('si-califica').classList.remove('hidden');
                document.getElementById('formulario').classList.remove('hidden');
            } else {
                document.getElementById('no-califica').classList.remove('hidden');
            }
        }

        // Form submission
        document.getElementById('leadForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Guardar datos incluyendo ciudad detectada
            const formData = {
                nombre: document.getElementById('nombre').value,
                whatsapp: document.getElementById('whatsapp').value,
                ciudad: detectedCity,
                cityName: currentCity.name,
                phone: currentCity.phone,
                quizResults: quizAnswers,
                qualified: true,
                source: 'campaign_' + detectedCity,
                timestamp: new Date().toISOString()
            };
            
            localStorage.setItem('leadData', JSON.stringify(formData));
            window.location.href = 'gracias.html';
        });

        // Smooth scrolling
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) target.scrollIntoView({ behavior: 'smooth' });
            });
        });

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            updateCityElements();
            
            // Log para tracking
            console.log('City detected:', currentCity.name, 'from URL param:', cityParam);
            
            // Google Analytics event (si tienes GA configurado)
            if (typeof gtag !== 'undefined') {
                gtag('event', 'city_detected', {
                    'city': currentCity.name,
                    'source': cityParam ? 'url_param' : 'default'
                });
            }
        });
    </script>
</body>
</html>